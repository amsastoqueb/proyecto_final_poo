<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa con Leaflet y GeoJSON</title>
    
    <!-- CSS de Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <!-- Tu CSS -->
    <link rel="stylesheet" href="estilos.css">

    <style>
        /* Estilo del body y contenedor principal */
        .container {
            display: flex;
            height: 100vh;
            width: 100%;
        }

        /* Contenedor del mapa */
        #map {
            flex: 2;
            height: 100%;
        }

        .description h2 {
            margin-top: 0;
        }

        /* Colores base */
        :root {
            --verde-principal: #a8d5ba;
            --verde-oscuro: #6b8f71;
            --blanco: #ffffff;
            --gris: #f4f4f4;
        }

        /* Estilos básicos del menú desplegable */
        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
        }
        nav ul li {
            position: relative;
        }
        nav ul li a {
            display: block;
            padding: 10px 15px;
            color: white;
            text-decoration: none;
        }
        nav ul li:hover {
            background-color: #256428;
        }
        /* Menú desplegable oculto por defecto */
        nav ul li ul {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background-color: #2e7d32;
            min-width: 150px;
            z-index: 1000;
        }
        nav ul li ul li a {
            padding: 10px;
        }
        /* Mostrar submenú al pasar el mouse */
        nav ul li:hover ul {
            display: block;
        }
    </style>
</head>
<body>

    <!-- Encabezado con logo -->
    <header>
        <div class="logo-container">
            <img src="img/logo.jpeg" alt="Logo Arborizadora Alta" width="80">
            <h1>ARBORIZADORA ALTA</h1>
        </div>

        <!-- Barra de navegación -->
        <nav>
        <ul class="menu">
        <li><a href="index.html" >Inicio</a></li>
        <li class="dropdown">
            <a href="#" class="activo">Equipamientos</a>
            <ul class="submenu">
                <li><a href="parques.html">Parques</a></li>
                <li><a href="movilidad.html">Movilidad</a></li>
                <li><a href="vias.html" class="activo">Vías</a></li>
            </ul>
        </li>
        <li>
                <a href="#">Catastro</a>
                    <ul>
                        <li><a href="catastro3D.html">Catastro 3D</a></li>
                        <li><a href="recorridovirtual.html">Recorrido Virtual</a></li>
                    </ul>
                </li>
        <li><a href="problematicas.html">Problemáticas</a></li>
        <li><a href="acerca.html">Acerca de</a></li>
        </ul>
        </nav>
    </header>

    <div class="container" style="display: flex; gap: 20px; padding: 20px; height: 70vh;">
        <!-- Lado izquierdo: visor Leaflet -->
        <div id="map" style="flex: 1.4; height: 100%; border: 2px solid #2e7d32; border-radius: 8px;"></div>

        <!-- Lado derecho: descripción con recuadro verde -->
        <div class="description" style="flex: 1; background-color: rgba(240, 252, 242, 0.1);
        border: 2px solid rgba(46, 125, 50, 1); border-radius: 8px; padding: 20px; overflow-y: auto;">
            <!-- Subtítulo VIAS -->
            <center><h2 class="badge-title">VIAS</h2></center>
            <h3>Descripción del mapa</h3>
            <p>Este mapa interactivo muestra las principales vías del barrio Arborizadora Alta, ubicado en la localidad de Ciudad Bolívar, al sur de Bogotá. Arborizadora Alta es una zona caracterizada por su crecimiento urbano informal, donde muchas familias han construido sus viviendas de manera autónoma, contribuyendo al desarrollo de la comunidad.</p>

            <p>Entre las vías más destacadas se encuentran:</p>

            <p><strong>Vía Arborizadora Alta:</strong> Una de las arterias principales que conecta diversos sectores del barrio y facilita el acceso a otras zonas de la ciudad.</p>
            <p><strong>Carrera 45:</strong> Una vía significativa que atraviesa el barrio, conectando con importantes puntos de la localidad.</p>
            <p><strong>Calle 69 Sur:</strong> Una calle transversal que interseca varias vías principales, facilitando la movilidad dentro del barrio.</p>
            <p><strong>Transversal 34:</strong> Una vía que conecta con otras áreas de Ciudad Bolívar, mejorando la conectividad del barrio.</p>
            <p><strong>Calle 75 Sur:</strong> Una calle que bordea el barrio, proporcionando acceso a servicios y comercios locales.</p>

            <p>Estas vías son esenciales para la movilidad de los residentes y el acceso a servicios y comercios locales. Además, el barrio cuenta con una red de transporte público que incluye rutas de autobús como 6-9, H605, H639 y T25, así como la estación de tranvía Juan Pablo II, facilitando la conexión con otras partes de la ciudad.</p>

            <p>Al pasar el cursor sobre cualquier vía en el mapa, podrá visualizar la latitud y longitud exactas de ese punto, facilitando la exploración geográfica precisa del barrio.</p>
        </div>
    </div>

    <!-- Scripts de Leaflet -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
    // Crear el mapa
    var map = L.map('map').setView([4.566687, -74.160779], 12);

    // Agregar capa base
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Cargar archivo GeoJSON de vías y hacer zoom automático
    fetch('vias_arbalta.geojson')
        .then(response => response.json())
        .then(data => {
            var viasLayer = L.geoJSON(data, {
                style: {
                    color: 'orange',
                    weight: 3
                },
                onEachFeature: function (feature, layer) {
                    // Evento cuando el mouse pasa sobre la feature
                    layer.on('mouseover', function (e) {
                        var latlng = e.latlng;
                        var etiqueta = (feature && feature.properties && feature.properties.MVIETIQUET != null)
                            ? String(feature.properties.MVIETIQUET)
                            : '';
                        var content = `<strong>Latitud: ${latlng.lat.toFixed(6)}, Longitud: ${latlng.lng.toFixed(6)}` +
                                       (etiqueta ? `<br>Dirección: ${etiqueta}` : '');

                        L.popup({
                            closeButton: false,
                            offset: L.point(0, -10)
                        })
                        .setLatLng(latlng)
                        .setContent(content)
                        .openOn(map);
                    });

                    // Evento cuando el mouse sale de la feature
                    layer.on('mouseout', function () {
                        map.closePopup();
                    });
                }
            }).addTo(map);

            // Ajustar zoom y centro para mostrar todo el GeoJSON
            map.fitBounds(viasLayer.getBounds());
        })
        .catch(error => console.error('Error cargando GeoJSON de vías:', error));

    // Cargar archivo GeoJSON de contorno (solo borde)
    fetch('arbalta_barrio.geojson')
        .then(response => response.json())
        .then(data => {
            L.geoJSON(data, {
                style: {
                    color: 'black',
                    weight: 2,
                    fill: false
                }
            }).addTo(map);
        })
        .catch(error => console.error('Error cargando GeoJSON de contorno:', error));
    </script>

</body>
</html>